var $ = jQuery.noConflict();

$(function() {
    var CodePage = $("#reset-page");

    CodePage.find("form").submit(function(e) {
        // Preventing form submissions. If you implement
        // a backend, you might want to remove this code
        e.preventDefault();

        $.ajax({
            url: rootWebService + "ForgotPassword/Code/" + codeReset,
            type: "POST",
            cache: false,
            async: false,
            data: $("#reset-form").serialize(),
            success: function(response) {
                var msg = response.msg;

                if (msg === "INVALID_CODE") {
                    Notiflix.Report.Failure(
                        "Terjadi Kesalahan !",
                        "Server tidak merespon permintaan dikarenakan terjadi perubahan !! - System<br>",
                        "Tutup"
                    );
                } else if (msg === "KOSONG") {
                    Notiflix.Report.Warning(
                        "Data tidak boleh kosong !",
                        "Mohon untuk mengisi semua form yang telah disediakan !",
                        "Tutup"
                    );
                } else if (msg === "SHORT_PASS") {
                    Notiflix.Report.Warning(
                        "Password Terlalu Pendek",
                        "Password yang anda gunakan terlalu pendek, mauskkan minimal 6 karakter !",
                        "Tutup"
                    );
                } else if (msg === "PASS_NOT_SAME") {
                    Notiflix.Report.Warning(
                        "Password tidak sama !",
                        "Password baru dan ulangi password tidak sama !",
                        "Tutup"
                    );
                } else if (msg === "SUCCESS_RESET") {
                    Notiflix.Report.Success(
                        "Reset Password Berhasil",
                        "Password anda berhasil diperbarui, silahkan login dengan password baru anda <br><br>- System",
                        "Tutup"
                    );
                    $("form :input").val("");
                    setTimeout(function() {
                        window.location.href = rootWebService + "Login";
                    }, 5000);
                } else if (msg === "FAIL_RESET") {
                    Notiflix.Report.Failure(
                        "Terjadi Kesalahan !",
                        "Server tidak merespon permintaan, coba beberapa saat lagi - System<br>",
                        "Tutup"
                    );
                }
            }, //success
            error: function(xhr, ajaxOption, thrownError) {
                Notiflix.Report.Failure(
                    "Terjadi Kesalahan !",
                    "Server tidak merespon permintaan !! - System<br>",
                    "Tutup"
                );
            }, //error
        }); //ajax
    });
});