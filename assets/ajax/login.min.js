var $ = jQuery.noConflict();

$(function() {
    var loginPage = $("#login-page");

    loginPage.find("form").submit(function(e) {
        // Preventing form submissions. If you implement
        // a backend, you might want to remove this code
        e.preventDefault();
        $.ajax({
            url: rootWebService + "login",
            type: "POST",
            cache: false,
            async: false,
            data: $("#login-form").serialize(),
            success: function(response) {
                var msg = response.msg;

                if (msg === "CM") {
                    Notiflix.Notify.Success("Login Berhasil !");
                    setTimeout(function() {
                        Notiflix.Notify.Info(
                            "Sedang Mengalihkan Ke halaman Caddy Master !"
                        );
                    }, 1000);
                    setTimeout(function() {
                        window.location = rootWebService + "CaddyMaster/";
                    }, 2500);
                } else if (msg === "GOM") {
                    Notiflix.Notify.Success("Login Berhasil !");
                    setTimeout(function() {
                        Notiflix.Notify.Info(
                            "Sedang Mengalihkan Ke halaman Golf Operation Manager !"
                        );
                    }, 1000);
                    setTimeout(function() {
                        window.location = rootWebService + "Manager/";
                    }, 2500);
                } else if (msg === "ADM") {
                    Notiflix.Notify.Success("Login Berhasil !");
                    setTimeout(function() {
                        Notiflix.Notify.Info("Sedang Mengalihkan Kehalaman Admin !");
                    }, 1000);
                    setTimeout(function() {
                        window.location = rootWebService + "Admin/";
                    }, 2500);
                } else if (msg === "OFF") {
                    Notiflix.Report.Failure(
                        "Tidak Bisa Mengakses Akun !",
                        "Akun anda telah di non-aktifkan oleh administrator",
                        "Tutup"
                    );
                } else if (msg === "PASSWORD_SALAH") {
                    Notiflix.Report.Failure(
                        "Password Salah !",
                        "Password yang anda masukkan salah !! jika lupa dengan password yang anda gunakan, bisa menggunakan fitur Forgot Password ",
                        "Tutup"
                    );
                } else if (msg === "USERNAME_SALAH") {
                    Notiflix.Report.Failure(
                        "Username Tidak Dikenal !",
                        "Username yang anda masukkan tidak terdaftar !",
                        "Tutup"
                    );
                } else if (msg === "KOSONG") {
                    Notiflix.Report.Warning(
                        "Data Tidak Lengkap !",
                        "Dimohon untuk melengkapi form yang telah disediakan !",
                        "Tutup"
                    );
                }
            }, //success
            error: function(xhr, ajaxOption, thrownError) {
                Notiflix.Report.Failure(
                    "Terjadi Kesalahan !",
                    "Server tidak merespon permintaan !! - System<br>",
                    "Tutup"
                );
            }, //error
        }); //ajax
    });
});