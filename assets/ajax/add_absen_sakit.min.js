var $ = jQuery.noConflict();
$(document).ready(function() {
    function tiban_absen_sakit() {
        $.ajax({
            url: rootWebService + "CaddyMaster/TibanAbsenSakit",
            method: "POST",
            data: $("#absen-sakit-form").serialize(),
            success: function(data) {
                var msg = data.msg;
                if (msg === "Success") {
                    Notiflix.Report.Success(
                        "Berhasil !",
                        "Data Absen Sakit Berhasil Ditambahkan",
                        "Tutup"
                    );
                    $("form :input").val("");
                    $("#caddy").select2("val", "");
                } else if (msg === "WORNG") {
                    Notiflix.Report.Failure(
                        "Terjadi Kesalahan !",
                        "Data yang dimasukkan tidak benar !",
                        "Tutup"
                    );
                }
            }, //success
            error: function(xhr, ajaxOption, thrownError) {
                Notiflix.Report.Failure(
                    "Terjadi Kesalahan !",
                    "Server tidak merespon permintaan !! - System<br>",
                    "Tutup"
                );
            }, //error
        });
    }

    $("#absen-sakit-form").on("submit", function(event) {
        event.preventDefault();

        $.ajax({
            url: rootWebService + "CaddyMaster/AddAbsenSakit",
            method: "POST",
            data: new FormData(this),
            contentType: false,
            cache: false,
            processData: false,
            success: function(data) {
                var msg = data.msg;

                if (msg === "Success") {
                    Notiflix.Report.Success(
                        "Berhasil !",
                        "Data Absen Sakit Berhasil Ditambahkan",
                        "Tutup"
                    );
                    $("form :input").val("");
                    $("#caddy").select2("val", "");
                } else if (msg === "SAME") {
                    Notiflix.Report.Warning(
                        "Data Sudah Ada !",
                        "Data absen sakit yang dimasukkan sudah ada diabsensi !",
                        "Tutup"
                    );
                } else if (msg === "REPLACE") {
                    Notiflix.Confirm.Show(
                        "Data Absen Bentrok !",
                        "Data absen yang dimasukkan bentrok dengan absen masuk, ingin menggantinya ?",
                        "Iya",
                        "Tidak",
                        function() {
                            tiban_absen_sakit();
                        },
                        false
                    );
                } else if (msg === "WORNG") {
                    Notiflix.Report.Failure(
                        "Terjadi Kesalahan !",
                        "Data yang dimasukkan tidak benar !",
                        "Tutup"
                    );
                }
            }, //success
            error: function(xhr, ajaxOption, thrownError) {
                Notiflix.Report.Failure(
                    "Terjadi Kesalahan !",
                    "Server tidak merespon permintaan !! - System<br>",
                    "Tutup"
                );
            }, //error
        });
    });
});