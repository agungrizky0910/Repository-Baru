var $ = jQuery.noConflict();

$(function() {
    var loginPage = $("#reset-page");

    loginPage.find("form").submit(function(e) {
        // Preventing form submissions. If you implement
        // a backend, you might want to remove this code
        e.preventDefault();
        $.ajax({
            url: rootWebService + "ForgotPassword",
            type: "POST",
            cache: false,
            async: false,
            data: $("#reset-form").serialize(),
            success: function(response) {
                var msg = response.msg;

                if (msg === "SUCCESS_LOST") {
                    Notiflix.Report.Success(
                        "Reset Password",
                        "Link reset password telah dikirim melalui email. Silahkan periksa kotak masuk email anda untuk melakukan ubah password",
                        "Tutup"
                    );
                    $("form :input").val("");
                    setTimeout(function() {
                        window.location.href = rootWebService + "Login";
                    }, 5000);
                } else if (msg === "FAIL_SEND_EMAIL") {
                    Notiflix.Report.Warning(
                        "Terjadi Kesalahan !",
                        "Terjadi kesalahan, coba beberapa saat lagi <br><br> - System",
                        "Tutup"
                    );
                } else if (msg === "NO_FOUND_EMAIL") {
                    Notiflix.Report.Failure(
                        "Email Tidak Dikenal !",
                        "Email yang anda masukkan tidak dikenal !",
                        "Tutup"
                    );
                } else if (msg === "INVALID_EMAIL") {
                    Notiflix.Report.Warning(
                        "Email Tidak Valid !",
                        "Format email yang anda masukkan tidak benar !",
                        "Tutup"
                    );
                } else if (msg === "KOSONG") {
                    Notiflix.Report.Warning(
                        "Data Tidak Lengkap !",
                        "Harap isi semua form yang sudah disediakan !",
                        "Tutup"
                    );
                }
            }, //success
            error: function(xhr, ajaxOption, thrownError) {
                Notiflix.Report.Failure(
                    "Terjadi Kesalahan !",
                    "Server tidak merespon permintaan !! - System<br>",
                    "Tutup"
                );
            }, //error
        }); //ajax
    });
});